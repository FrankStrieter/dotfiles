# shellcheck shell=bash

if [[ "$platform" == 'mac' ]]; then
  formula openssh
  formula ssh-copy-id
fi

ids="$topic/ssh"

shopt -s nullglob
shopt -u dotglob
ids_available=($ids/*)

if ((!${#ids_available[*]})); then
  info "$(printf "Omitting symlink for %b%s%b as there are no IDs available" \
                 $green "$ids" $reset_color)"
  return
fi

symlink "$ids"

# TODO
for id in id_rsa capistrano letsencrypt teamcity; do
  private_key="$HOME/.ssh/$id"
  if [[ -f "$private_key" ]]; then
    chmod 600 "$private_key"
  fi
done

# vim: set ft=sh ts=2 sw=2 et:
