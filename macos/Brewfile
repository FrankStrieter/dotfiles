# Tap homebrew/dupes to be able to install updates to the outdated utilities
# that are shipped with macOS.
tap 'homebrew/dupes'

# GNU utilities.
brew 'binutils'
brew 'coreutils'
brew 'diffutils'
brew 'file-formula'
brew 'findutils', args: %w(with-default-names)
brew 'gawk'
brew 'gnu-getopt'
brew 'gnu-indent', args: %w(with-default-names)
brew 'gnu-sed', args: %w(with-default-names)
brew 'gnu-tar', args: %w(with-default-names)
brew 'gnu-which', args: %w(with-default-names)
brew 'gnutls'
brew 'gpatch'
brew 'grep', args: %w(with-default-names)
brew 'gzip'
brew 'less'
brew 'make'
brew 'rsync'
brew 'unzip'
brew 'watch'

# SixXS, https://www.sixxs.net/wiki/Aiccu/Installation
# Currently not available on Sierra :(
# brew 'tuntap'
# brew 'aiccu'

# Apps without topic directories.
brew 'curl', args: %w(with-libidn with-libssh2 with-nghttp2 with-openssl)
brew 'imagemagick', args: %w(with-webp)
brew 'm-cli'
brew 'nmap'
brew 'p7zip'
brew 'speedtest_cli'
brew 'ssh-copy-id'
brew 'testssl'
brew 'the_platinum_searcher'
brew 'webkit2png'
brew 'xz'

cask 'android-file-transfer'
cask 'bartender'
cask 'bettertouchtool'
cask 'cleanmymac'
cask 'clipmenu'
cask 'dash'
cask 'double-commander'
cask 'dropbox'
cask 'evernote'
cask 'flux'
cask 'google-chrome'
cask 'google-hangouts'
cask 'istat-menus'
cask 'kap'
cask 'karabiner-elements'
cask 'lumen'
cask 'owncloud'
cask 'path-finder'
cask 'popclip'
cask 'rubymine'
cask 'sizeup'
cask 'skype'
cask 'symboliclinker'
cask 'teamviewer'
cask 'typinator'
cask 'vlc'

# Apps from the Mac App Store.
# mas 'Paste', id: 967_805_235
# mas 'PCalc', id: 403_504_866
# mas 'Temps', id: 489_930_332
mas 'Amphetamine', id: 937_984_704
mas 'Better', id: 1_121_192_229
mas 'CleanMyDrive', id: 523_620_159
mas 'EasyRes', id: 688_211_836
mas 'Monosnap', id: 540_348_655
mas 'Newton', id: 1_059_655_371

puts 'Manually install these:'
[
  'AnyDesk: https://anydesk.de/',
  'Spectacle: https://www.spectacleapp.com/',
  'Roboform: https://www.roboform.com/for-mac'
].each { |app| puts app }

unless File.exist?('/usr/local/bin/macmounter.py')
  require 'tmpdir'
  require 'rake'

  Dir.mktmpdir('macmounter') do |tmp|
    Dir.chdir(tmp) do
      RakeFileUtils.sh(*%w(git clone https://github.com/roubles/macmounter.git .))
      RakeFileUtils.sh(*%w(sudo ./install.sh))
    end
  end
end
