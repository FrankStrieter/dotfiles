local zplug_source="$1"
local zplug_dir="$(dirname "$zplug_source")"

verbose Downloading $fg[cyan]zplug$reset_color to $fg[green]$zplug_dir$reset_color

if [[ ! -f "$zplug_source" ]]; then
  if (($+commands[git])); then
    git clone https://github.com/b4b4r07/zplug "$zplug_dir"
    if [[ $? -ne 0 ]]; then
      verbose Failed to download $fg[cyan]zplug$reset_color to $fg[green]$zplug_source$reset_color. ZSH startup will continue without zplug.
      return 2
    fi
  else
    verbose You need $fg[red]git$reset_color to download $fg[cyan]zplug$reset_color. ZSH startup will continue without zplug.
    return 1
  fi
fi

verbose Loading $fg[cyan]zplug$reset_color from $fg[green]$zplug_source$reset_color
source "$zplug_source" # && zplug update --self

# vim:set filetype=sh:
